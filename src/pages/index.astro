---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import { asset } from '../utils/paths.js';
// CarruselMarcas.astro
const marcas = [
  { src: asset('img/inicio/carrusel/titulo_pipoquin.webp'), alt: 'Pipoquin' },
  { src: asset('img/inicio/carrusel/titulo_frutiquin.webp'), alt: 'Frutiquin' },
  { src: asset('img/inicio/carrusel/titulo_pipofrut.webp'), alt: 'Pipofrut' },
  { src: asset('img/inicio/carrusel/titulo_chocolatequin.webp'), alt: 'Chocolate Quin' },
  { src: asset('img/inicio/carrusel/titulo_merlyn.webp'), alt: 'Merlyn' },
  { src: asset('img/inicio/carrusel/titulo_fabulosa.webp'), alt: 'Fabulosa' },
  { src: asset('img/inicio/carrusel/titulo_papasquin.webp'), alt: 'Papas Quin' },
  { src: asset('img/inicio/carrusel/titulo_nachosquin.webp'), alt: 'Nachos Quin' },
  { src: asset('img/inicio/carrusel/titulo_quesos.webp'), alt: 'Quesos' }
];
---

<Layout title="ProcerbolSai - Inicio">
  <div id="content-container"
    class="vista_principal w-full h-[100vh] relative overflow-hidden paraNavbar hidden lg:block">
    <img src={asset('img/inicio/logo.webp')}
  class="logo_principal w-full lg:w-[35%]  absolute top-0 bottom-0 left-0 right-0 m-auto" alt="Portas ProcerbolSai">
  </div>

  <div id="content-container" class="vista_principal w-full h-[62vh] relative overflow-hidden paraNavbar lg:hidden">
    <img src={asset('img/inicio/logo.webp')}
  class="logo_principal w-[55%] absolute top-0 bottom-0 left-0 right-0 m-auto pt-17" alt="Portas ProcerbolSai">
    
  </div>




  <div id="principal-carousel" class="relative w-full z-10" data-carousel="slide">
    <div class="relative h-[25vh] lg:h-[75vh] xl:h-[90vh] overflow-hidden ">
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>
        <img src={asset('img/inicio/pipoquin.webp')} class="w-full h-full object-cover" alt="Pipoquin">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>
        <img src={asset('img/inicio/merlyn.webp')} class="w-full h-full object-cover" alt="merlyn">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>
        <img src={asset('img/inicio/pipofrut.webp')} class="w-full h-full object-cover" alt="Pipofrut">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>

        <img src={asset('img/inicio/frutiquin.webp')} class="w-full h-full object-cover" alt="Frutiquin">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>

        <img src={asset('img/inicio/papasquin.webp')} class="w-full h-full object-cover" alt="Papasquin">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>

        <img src={asset('img/inicio/quesitos.webp')} class="w-full h-full object-cover" alt="Quesitos">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>

        <img src={asset('img/inicio/nachos.webp')} class="w-full h-full object-cover" alt="Nachos">
      </div>
      <div class="hidden duration-1000 ease-in-out" data-carousel-item>

        <img src={asset('img/inicio/chocolatequin.webp')} class="w-full h-full object-cover" alt="Chocolatequin">
      </div>
    </div>

    <div class="absolute z-30 flex -translate-x-1/2 bottom-5 left-1/2 space-x-3 rtl:space-x-reverse">
      <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="true"
        aria-label="Slide 1" data-carousel-slide-to="0"></button>
      <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 2" data-carousel-slide-to="1"></button>
      <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 3" data-carousel-slide-to="2"></button>
      <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 4" data-carousel-slide-to="3"></button>
        <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 5" data-carousel-slide-to="4"></button>
        <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 6" data-carousel-slide-to="5"></button>
        <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 7" data-carousel-slide-to="6"></button>
        <button type="button" class="w-3 h-3 rounded-full bg-white/50 hover:bg-white" aria-current="false"
        aria-label="Slide 8" data-carousel-slide-to="7"></button>
    </div>

    <button type="button"
      class="absolute top-0 start-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
      data-carousel-prev>
      <span
        class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none">
        <svg class="w-4 h-4 text-white rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 6 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M5 1 1 5l4 4" />
        </svg>
        <span class="sr-only">Previous</span>
      </span>
    </button>
    <button type="button"
      class="absolute top-0 end-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
      data-carousel-next>
      <span
        class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none">
        <svg class="w-4 h-4 text-white rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 6 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="m1 9 4-4-4-4" />
        </svg>
        <span class="sr-only">Next</span>
      </span>
    </button>
  </div>

  <!-- Carrousel -->
<section class="relative w-full overflow-hidden py-12 bg-white">
  <!-- Título -->
  <div class="text-center mb-8">
    <h2 class="text-4xl font-bold">
      <span class="text-[#009eb9]">NUESTRAS</span>
      <span class="text-gray-900"> MARCAS</span>
    </h2>
  </div>

  <!-- Contenedor del carrusel con fade en los extremos - Ancho 60% centrado -->
  <div class="relative max-w-[70%] mx-auto overflow-hidden">
    <!-- Gradiente izquierdo -->
    <div class="absolute left-0 top-0 bottom-0 w-24 md:w-32 lg:w-40 bg-gradient-to-r from-white via-white/80 to-transparent z-10 pointer-events-none"></div>
    
    <!-- Gradiente derecho -->
    <div class="absolute right-0 top-0 bottom-0 w-24 md:w-32 lg:w-40 bg-gradient-to-l from-white via-white/80 to-transparent z-10 pointer-events-none"></div>

    <!-- Track del carrusel -->
    <div class="carousel-track flex gap-8 md:gap-12 lg:gap-16">
      <!-- Triplicamos las imágenes para un scroll verdaderamente infinito -->
      {[...marcas, ...marcas, ...marcas].map((marca) => (
        <div class="carousel-item flex-shrink-0 w-32 md:w-40 lg:w-48 transition-all duration-300">
          <img
            src={marca.src}
            alt={marca.alt}
            class="w-full h-auto object-contain filter grayscale hover:grayscale-0 transition-all duration-300"
            loading="lazy"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .carousel-track {
    will-change: transform;
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const track = document.querySelector('.carousel-track');
    if (!track) return;

    const items = track.querySelectorAll('.carousel-item');
    const itemWidth = items[0].offsetWidth;
    const gap = 48; // lg:gap-16 = 4rem = 64px, ajusta según tu gap
    const totalWidth = (itemWidth + gap) * items.length / 3;
    
    let position = 0;
    const speed = 1.5; // Ajusta para velocidad (menor = más lento)

    function animate() {
      position -= speed;
      
      // Reinicia cuando ha movido exactamente un set completo
      if (Math.abs(position) >= totalWidth) {
        position = 0;
      }
      
      track.style.transform = `translateX(${position}px)`;
      requestAnimationFrame(animate);
    }

    // Elimina la animación CSS
    track.style.animation = 'none';
    
    animate();
  });
</script>

</Layout>